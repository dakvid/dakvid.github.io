---
title: "The Luminaries"
description: Do the the parts of Eleanor Catton's The Luminaries incrementally reduce by half? (TL;DR - no. There is a method, but it's not that.)
author: "David Friggens"
date: 2016-08-26
preview: images/preview.png
categories:
  - all
  - R
  - books
  - rpkg plotly
  - bar charts
  - scatter plots
output:
  radix::radix_article:
    self_contained: false
---

```{r setup, include=FALSE, message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
library(readr)
library(dplyr)
library(plotly)

hardback <- read_csv("data/luminaries_hardback.csv")
chapters <- read_csv("data/luminaries_chapters.csv")
```

Last year I read Eleanor Catton's 
[award](https://en.wikipedia.org/wiki/Man_Booker_Prize)-winning
[yarn](http://dimpost.wordpress.com/2013/07/17/on-what-the-luminaries-is-actually-like)
_[The Luminaries](http://www.librarything.com/work/13687338)_.
I started a little project around it, which is temporarily stalled (watch this space^[Maybe - I have a number of stalled projects!]), but recently a colleague remarked about the chapter lengths and I was reminded I had this data.

The novel has a number of structural constraints, one of which is that each of the 12 parts is half the length of the previous one.

Or are they?^[Fair warning - this post may not seem super interesting if you haven't read the book.
But the drive to write this was as much to try out Plotly as anything else, so feel free to stay
and marvel and the interactive graphs.]

```{r pages}
plot_ly(
  hardback,
  x = ~Part,
  y = ~Pages,
  text = ~paste0("Part ", Part, "<br>",
                 Title, "<br>",
                 Pages, " pages"),
  hoverinfo = "text",
  type = "bar"
) %>% 
  layout(
    title = "Divisions in The Luminaries (Hardback)",
    xaxis = list(dtick = 1)
  )
```

You can see easily at a glance that the pages decrease, but they don't reliably halve. Notably, parts three
and four are not too different. The tail doesn't look to decrease like that, but in part that's due to pages
being a less reliable indicator for length when they're that short.

First, why does the length decrease at all? Well each part has different divisions --- Part _n_ has 13--_n_
chapters --- so that's one thing. The only comment I've seen is from a
[a reviewer who said](https://www.theguardian.com/books/2013/oct/15/eleanor-catton-booker-prize-winner-the-luminaries)
it "mimic[s] the moon waning through its lunar cycle", but I don't know whether that's just a guess.

### From pages to words

I do have word counts though, so lets look at that instead.

```{r words}
chapters %>% 
  inner_join(hardback) %>% 
  group_by(Part, Title) %>% 
  summarise(Words = sum(Text)) %>% 
  ungroup() %>% 
  plot_ly(
    x = ~Part,
    y = ~Words,
    text = ~paste0("Part ", Part, "<br>",
                   Title, "<br>",
                   prettyNum(Words, big.mark = ","), " words"),
    hoverinfo = "text",
    type = "bar"
  ) %>% 
  layout(
    title = "Divisions in The Luminaries",
    xaxis = list(dtick = 1)
  )
```

Still you can see that it's not halving each time. And those later parts are getting hard to see. So let's look at the ratios.

First, I'll point out that each chapter begins with a little summary text. At the very first chapter, this is a brief couple of lines:

> In which a stranger arrives in Hokitika; a secret council is disturbed; Walter Moody conceals his most recent memory; and Thomas Balfour begins to tell a story.

Which does very briefly summarise the plot. In the very final chapter, the summary is longer than the actual text, and gives more plot. Should these count when we're comparing them? Let's have a look.

The next plot shows the ratio of each Part to the one before, looking at the summary, the main text, and both together.

```{r ratios}
part_words <- 
  chapters %>% 
  inner_join(hardback) %>% 
  group_by(Part, Title) %>% 
  summarise(
    Summary = sum(Summary),
    Body = sum(Text),
    Full = sum(Summary + Text)
  ) %>% 
  ungroup() %>% 
  mutate(PrevPart = Part - 1)

inner_join(
  part_words %>% select(-PrevPart, -Title),
  part_words,
  by = c("Part" = "PrevPart")
) %>% 
  mutate(
    Summary = round(Summary.y / Summary.x * 100, 0), 
    Body = round(Body.y / Body.x * 100, 0), 
    Full = round(Full.y / Full.x * 100, 0)
  ) %>% 
  select(Part.y, Title, Summary, Body, Full) %>% 
  rename(Part = Part.y) %>% 
  plot_ly() %>% 
  add_trace(
    x = ~Part,
    y = ~Full,
    name = "All text",
    mode = "markers",
    hoverinfo = "text",
    text = ~paste0("Part ", Part, ": ", Title, "<br><b>", Full, "%</b> the length of the previous part in total")
  ) %>% 
  add_trace(
    x = ~Part,
    y = ~Body,
    name = "Main text",
    mode = "markers",
    hoverinfo = "text",
    text = ~paste0("Part ", Part, ": ", Title, "<br><b>", Body, "%</b> the length of the previous part in the body")
  ) %>% 
  add_trace(
    x = ~Part,
    y = ~Summary,
    name = "Summary text",
    mode = "markers",
    hoverinfo = "text",
    text = ~paste0("Part ", Part, ": ", Title, "<br><b>", Summary, "%</b> the length of the previous part in the summary")
  ) %>% 
  add_trace(
    x = c(1.5, 12.5),
    y = c(50, 50),
    mode = "lines",
    name = "if they halved",
    hoverinfo = "text",
    text = "",
    showlegend = FALSE,
    line = list(color = "gray")
  ) %>% 
  layout(
    title = "Comparison of length of divisions in The Luminaries",
    xaxis = list(dtick = 1),
    yaxis = list(title = "Percent length of previous Part")
  )
```

<aside>
The summary text for Part 7 is a massive outlier that makes the rest of it hard to see.
You can click on the legend for "Summary text" to remove that series, or just click and drag a box to zoom in. 
Plotly and interactive graphics FTW!
</aside>

Looking at this, you can see
that only a few parts are actually half their predecessor, even if you're being generous and allow a 10% margin
on either side.

Including or excluding the summary text doesn't seem to have a consistent effect.


### Chapter by chapter

As mentioned, each part is split into 13--_n_ chapters. Naturally, the next question is "what do the chapters
look like?"

```{r chapters, layout="l-body-outset"}
chapters %>% 
  group_by(Part) %>% 
  plot_ly(
    x = ~Number,
    y = ~Text,
    #color = ~Part,
    marker = list(color = c(rep("#1f77b4",12),rep("#ff7f0e",11),rep("#2ca02c",10),rep("#d62728",9),
                            rep("#9467bd",8),rep("#8c564b",7),rep("#e377c2",6),rep("#7f7f7f",5),
                            rep("#bcbd22",4),rep("#17becf",3),rep("#1f77b4",2),"#ff7f0e")),
    text = ~paste0("Part ", Part, "<br>",
                   "Chapter ", Number, ": ", Name, "<br>",
                   "Body text: ", prettyNum(Text, big.mark = ","), " words"),
    hoverinfo = "text",
    type = "bar"
  ) %>% 
  add_trace(
    x = ~Number,
    y = ~Summary,
    #color = ~Part,
    marker = list(color = c(rep("#2ca02c",12),rep("#d62728",11),rep("#9467bd",10),rep("#8c564b",9),
                            rep("#e377c2",8),rep("#7f7f7f",7),rep("#bcbd22",6),rep("#17becf",5),
                            rep("#1f77b4",4),rep("#ff7f0e",3),rep("#2ca02c",2),"#d62728")),
    text = ~paste0("Part ", Part, "<br>",
                   "Chapter ", Number, ": ", Name, "<br>",
                   "Summary text: ", Summary, " words"),
    hoverinfo = "text",
    type = "bar"
  ) %>% 
  layout(
    title = "Length of chapters in The Luminaries",
    xaxis = list(title = "Chapter"),
    yaxis = list(title = "Words"),
    showlegend = FALSE,
    barmode = "stack"
  )
```

There's no clear pattern I can see here.
On the whole, the lengths are decreasing, but certainly not in a uniform way. Chapter 13 is very obvious at
one end, and 35/37 at the other. The latter two offer an explanation for why Part 4 is about the same length
as Part 3.

<aside>
Again, feel free to make liberal use of the zoom functionality, especially to see the summary text details at
the top of each bar.
</aside>


### Conclusion

I think we can say that "each successive part halves in length" is not an accurate description of
_The Luminaries_. The only constraint seems to be the number of chapters in each part, decreasing by
one each time. This combines with the general trend for the chapters to get smaller to produce the
descreasing trend that many people have mistaken for halving.




## Data {.appendix}

Manually collected counts of 
[pages by part](data/luminaries_hardback.csv)
and
[words by chapter](data/luminaries_chapters.csv).

## Code listing {.appendix}

The final graph is created with the following code.
When I initially created this with Plotly 3 the colouring by part was achieved
with the commented out `color` argument. This stopped working (along with many
other things) with Plotly 4 and the ungainly marker list was my quick and dirty
approach to getting it going again --- there's probably a better way I didn't have
time to figure out.

```{r ref.label='chapters', echo = T, eval = F}
```
